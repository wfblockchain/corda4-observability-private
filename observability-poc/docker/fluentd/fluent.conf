<source>
    @type forward
    port 24224
    bind 0.0.0.0
</source>
<source>
  @type tail
  path /var/log/partya/node-partya_json.log,/var/log/partyb/node-partyb_json.log,/var/log/notary/node-notary_json.log   
  pos_file /var/log/fluentd/logs.log.pos
  time_format "%Y-%m-%dT%H:%M:%S.%L%Z"
  tag node.*
  read_from_head true
  format none
</source>
# <match **>
#     @type file
#     path /var/log/fluent/node
#     <buffer time>
#       timekey_wait 5m
#       timekey 86400
#       timekey_use_utc true
#       path /var/log/fluent/node/logs.*
#     </buffer>
#     append true
#  </match>
#  <match **>
#     @type splunk_hec
#     host  splunkenterprise
#     port  8088
#     token 9eac125e-17c6-4c90-aae9-f3c1e7d7a7c8
#     output_format json
#     enableSSL 0
#     #ssl_version     TLSv1_3
#     <buffer>
#         @type memory
#         flush_mode  interval
#         flush_interval  2
#         flush_thread_count  2
#         overflow_action block
#         retry_forever true
#     </buffer>
# </match>
#  <match **>
#     @type splunk_hec
#     hec_host splunkenterprise
#     hec_port 9997
#     hec_token 00000000-0000-0000-0000-000000000000
#     output_format json
# </match>
 <match **>
# <match docker.*.*>
  @type copy
  <store>
    @type elasticsearch
    host elasticsearch
    port 9200
    logstash_format true
    logstash_prefix fluentd
    logstash_dateformat %Y.%m.%d
    include_tag_key true
    type_name access_log
    tag_key @log_name
    <buffer>
      flush_interval 1s
      flush_thread_count 2
    </buffer>
  </store>
  <store>
    @type splunk_hec
    host  splunkenterprise
    port  8088
    token 9eac125e-17c6-4c90-aae9-f3c1e7d7a7c8
    output_format json
    enableSSL 0
    #ssl_version     TLSv1_3
    <buffer>
        @type memory
        flush_mode  interval
        flush_interval  2
        flush_thread_count  2
        overflow_action block
        retry_forever true
    </buffer>  
  </store>
</match>
